?   	github.com/DIMO-INC/devices-api/cmd/devices-api	[no test files]
?   	github.com/DIMO-INC/devices-api/docs	[no test files]
?   	github.com/DIMO-INC/devices-api/internal/appmetrics	[no test files]
ok  	github.com/DIMO-INC/devices-api/internal/config	0.116s
The files belonging to this database system will be owned by user "moreland".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

creating directory /Users/moreland/.embedded-postgres-go/extracted/data ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... America/Detroit
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... ok
syncing data to disk ... ok

Success. You can now start the database server using:

    /Users/moreland/.embedded-postgres-go/extracted/bin/pg_ctl -D /Users/moreland/.embedded-postgres-go/extracted/data -l logfile start

waiting for server to start....2021-12-30 15:39:09.210 EST [65772] LOG:  starting PostgreSQL 12.8 on x86_64-apple-darwin, compiled by Apple LLVM version 6.0 (clang-600.0.54) (based on LLVM 3.5svn), 64-bit
2021-12-30 15:39:09.212 EST [65772] LOG:  listening on IPv6 address "::1", port 6669
2021-12-30 15:39:09.212 EST [65772] LOG:  listening on IPv4 address "127.0.0.1", port 6669
2021-12-30 15:39:09.212 EST [65772] LOG:  listening on Unix socket "/tmp/.s.PGSQL.6669"
2021-12-30 15:39:09.220 EST [65773] LOG:  database system was shut down at 2021-12-30 15:39:09 EST
2021-12-30 15:39:09.231 EST [65772] LOG:  database system is ready to accept connections
 done
server started
2021/12/30 15:39:12 OK    20211117135549_base_schema.sql
2021/12/30 15:39:12 OK    20211118131220_device_definitions.sql
2021/12/30 15:39:12 OK    20211130143658_compatibility.sql
2021/12/30 15:39:12 OK    20211208161925_user_devices.sql
2021/12/30 15:39:12 OK    20211221151503_fix_integration_country_code.sql
2021/12/30 15:39:12 OK    20211221161323_user_smartcar_integration.sql
2021/12/30 15:39:12 OK    20211222165046_user_device_integration_external_id.sql
2021/12/30 15:39:12 OK    20211223151652_user_device_integration_cascade.sql
2021/12/30 15:39:12 OK    20211227114719_remove_squishvin.sql
2021/12/30 15:39:12 OK    20211227145314_device_definition_mmy_unique.sql
2021/12/30 15:39:12 OK    20211227160151_device_ingest_data.sql
2021/12/30 15:39:12 OK    20211229131758_trim_model_column.sql
2021/12/30 15:39:12 OK    20211229142254_integration_failure_states.sql
2021/12/30 15:39:12 goose: no migrations to run. current version: 20211229142254
created device def id: 231LfrajMwqc3viACbbD5BvrY1t
2021-12-30 15:39:12.340 EST [65783] ERROR:  relation "devices_api.migrations" does not exist at character 36
2021-12-30 15:39:12.340 EST [65783] STATEMENT:  SELECT version_id, is_applied from devices_api.migrations ORDER BY id DESC
waiting for server to shut down....2021-12-30 15:39:12.391 EST [65772] LOG:  received fast shutdown request
2021-12-30 15:39:12.391 EST [65772] LOG:  aborting any active transactions
2021-12-30 15:39:12.391 EST [65780] FATAL:  terminating connection due to administrator command
2021-12-30 15:39:12.392 EST [65782] FATAL:  terminating connection due to administrator command
2021-12-30 15:39:12.392 EST [65781] FATAL:  terminating connection due to administrator command
2021-12-30 15:39:12.392 EST [65783] FATAL:  terminating connection due to administrator command
2021-12-30 15:39:12.393 EST [65772] LOG:  background worker "logical replication launcher" (PID 65779) exited with exit code 1
2021-12-30 15:39:12.394 EST [65774] LOG:  shutting down
2021-12-30 15:39:12.401 EST [65772] LOG:  database system is shut down
 done
server stopped
The files belonging to this database system will be owned by user "moreland".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

creating directory /Users/moreland/.embedded-postgres-go/extracted/data ... ok
creating subdirectories ... ok
selecting dynamic shared memory implementation ... posix
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting default time zone ... America/Detroit
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... ok
syncing data to disk ... ok

Success. You can now start the database server using:

    /Users/moreland/.embedded-postgres-go/extracted/bin/pg_ctl -D /Users/moreland/.embedded-postgres-go/extracted/data -l logfile start

waiting for server to start....2021-12-30 15:39:17.550 EST [65811] LOG:  starting PostgreSQL 12.8 on x86_64-apple-darwin, compiled by Apple LLVM version 6.0 (clang-600.0.54) (based on LLVM 3.5svn), 64-bit
2021-12-30 15:39:17.552 EST [65811] LOG:  listening on IPv6 address "::1", port 6669
2021-12-30 15:39:17.552 EST [65811] LOG:  listening on IPv4 address "127.0.0.1", port 6669
2021-12-30 15:39:17.552 EST [65811] LOG:  listening on Unix socket "/tmp/.s.PGSQL.6669"
2021-12-30 15:39:17.560 EST [65812] LOG:  database system was shut down at 2021-12-30 15:39:17 EST
2021-12-30 15:39:17.570 EST [65811] LOG:  database system is ready to accept connections
 done
server started
2021-12-30 15:39:20.680 EST [65822] ERROR:  relation "devices_api.migrations" does not exist at character 36
2021-12-30 15:39:20.680 EST [65822] STATEMENT:  SELECT version_id, is_applied from devices_api.migrations ORDER BY id DESC
2021-12-30 15:39:20.681 EST [65822] ERROR:  schema "devices_api" does not exist at character 14
2021-12-30 15:39:20.681 EST [65822] STATEMENT:  CREATE TABLE devices_api.migrations (
	            	id serial NOT NULL,
	                version_id bigint NOT NULL,
	                is_applied boolean NOT NULL,
	                tstamp timestamp NULL default now(),
	                PRIMARY KEY(id)
	            );
waiting for server to shut down....2021-12-30 15:39:20.688 EST [65811] LOG:  received fast shutdown request
2021-12-30 15:39:20.689 EST [65811] LOG:  aborting any active transactions
2021-12-30 15:39:20.689 EST [65819] FATAL:  terminating connection due to administrator command
2021-12-30 15:39:20.689 EST [65820] FATAL:  terminating connection due to administrator command
2021-12-30 15:39:20.689 EST [65822] FATAL:  terminating connection due to administrator command
2021-12-30 15:39:20.691 EST [65811] LOG:  background worker "logical replication launcher" (PID 65818) exited with exit code 1
2021-12-30 15:39:20.691 EST [65813] LOG:  shutting down
2021-12-30 15:39:20.695 EST [65811] LOG:  database system is shut down
 done
server stopped
2021/12/30 15:39:20 failed to apply goose migrations for test: pq: schema "devices_api" does not exist
FAIL	github.com/DIMO-INC/devices-api/internal/controllers	17.064s
?   	github.com/DIMO-INC/devices-api/internal/database	[no test files]
?   	github.com/DIMO-INC/devices-api/internal/kafka	[no test files]
ok  	github.com/DIMO-INC/devices-api/internal/services	0.164s
?   	github.com/DIMO-INC/devices-api/internal/services/mocks	[no test files]
?   	github.com/DIMO-INC/devices-api/models	[no test files]
FAIL
